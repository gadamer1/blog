{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(makePost),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchMakePost),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(getPosts),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchGetPosts),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(postSaga);\n\nimport { all, fork, takeLatest, put, call } from \"redux-saga/effects\";\nimport { MAKE_POST_REQUEST, MAKE_POST_SUCCESS, MAKE_POST_FAILURE, GET_POSTS_REQUEST, GET_POSTS_SUCCESS, GET_POSTS_FAILURE } from \"../reducers/post/actions\";\nimport axios from \"axios\";\n\nfunction makePostAPI(data) {\n  return axios.post(\"/post\", data, {\n    withCredentials: true\n  });\n}\n\nfunction makePost(action) {\n  var Post;\n  return _regeneratorRuntime.wrap(function makePost$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return call(makePostAPI, action.payload);\n\n        case 3:\n          Post = _context.sent;\n          _context.next = 6;\n          return put({\n            type: MAKE_POST_SUCCESS,\n            result: {\n              body: Post.data.post,\n              nickname: Post.data.nickname,\n              date: Post.data.date,\n              title: Post.data.title,\n              _id: Post.data._id\n            }\n          });\n\n        case 6:\n          _context.next = 13;\n          break;\n\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          _context.next = 13;\n          return put({\n            type: MAKE_POST_FAILURE,\n            error: _context.t0.response\n          });\n\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 8]]);\n}\n\nfunction watchMakePost() {\n  return _regeneratorRuntime.wrap(function watchMakePost$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeLatest(MAKE_POST_REQUEST, makePost);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction getPostsAPI() {\n  return axios.get(\"/posts\", {\n    withCredentials: true\n  });\n}\n\nfunction getPosts() {\n  var Posts;\n  return _regeneratorRuntime.wrap(function getPosts$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return call(getPostsAPI);\n\n        case 3:\n          Posts = _context3.sent;\n          _context3.next = 6;\n          return put({\n            type: GET_POSTS_SUCCESS,\n            result: Posts.data.postLists\n          });\n\n        case 6:\n          _context3.next = 13;\n          break;\n\n        case 8:\n          _context3.prev = 8;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n          _context3.next = 13;\n          return put({\n            type: GET_POSTS_FAILURE,\n            error: _context3.t0.response\n          });\n\n        case 13:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[0, 8]]);\n}\n\nfunction watchGetPosts() {\n  return _regeneratorRuntime.wrap(function watchGetPosts$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return takeLatest(GET_POSTS_REQUEST, getPosts);\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n\nexport default function postSaga() {\n  return _regeneratorRuntime.wrap(function postSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return all([fork(watchMakePost), fork(watchGetPosts)]);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}","map":null,"metadata":{},"sourceType":"module"}